Пайплайн реализации Runner
Этап 0. Зафиксировать терминологию (что такое Runner у нас)

Runner — это стратегия, которая:

не выходит по “timeout как обязательно” (тайм-стоп может быть, но как risk-control)

основная прибыль — лесенка (ladder) тейков по XN: x2/x5/x10/…

может работать в режиме:

single-position (по одной сделке)

portfolio-runner (много позиций, общий портфельный “reset”)

Этап 1. Runner Ladder как “сделка” (без портфеля)

Цель: получить честный ответ “если торговать каждую позицию независимо, какова доходность распределения и какие уровни XN реально полезны”.

Выход: runner_trade_results.csv + summary.

Этап 2. Runner как полноценная Strategy (интеграция в Runner/BacktestRunner)

Цель: чтобы Runner запускался через тот же pipeline, что RR/RRD (как стратегия), выдавал StrategyOutput и дружил с репортами.

Этап 3. Portfolio-Runner (портфельные ограничения + капитал)

Цель: подключить:

allocation_mode (fixed/dynamic)

max_open_positions

max_exposure

комиссии/слиппедж (с execution profiles)

и посмотреть, что становится с доходностью и выживаемостью

Этап 4. Portfolio reset (runner_reset_enabled + XN)

Цель: реализовать “портфельное событие”:

если портфель достиг XN от некоторого базиса → закрыть всё, начать новый “цикл”

Этап 5. Stage A/B адаптация под Runner

Цель: Stage A/B сейчас заточены под RR/RRD (stability + windows). Для Runner нужны новые метрики (например, hit-rate x2/x5/x10, tail contribution, drawdowns, cycle metrics).