# XN Runner Research

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-01-XX  
**–ú–æ–¥—É–ª—å:** `backtester/research/xn_analysis/`

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¶–µ–ª—å XN-–∞–Ω–∞–ª–∏–∑–∞](#1-—Ü–µ–ª—å-xn-–∞–Ω–∞–ª–∏–∑–∞)
2. [–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç XN-–∞–Ω–∞–ª–∏–∑](#2-—á—Ç–æ-–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç-xn-–∞–Ω–∞–ª–∏–∑)
3. [–ß–µ–≥–æ –ù–ï –¥–µ–ª–∞–µ—Ç XN-–∞–Ω–∞–ª–∏–∑](#3-—á–µ–≥–æ-–Ω–µ-–¥–µ–ª–∞–µ—Ç-xn-–∞–Ω–∞–ª–∏–∑)
4. [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#4-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
5. [–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HIGH, –∞ –Ω–µ CLOSE](#5-–ø–æ—á–µ–º—É-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è-high-–∞-–Ω–µ-close)
6. [Workflow: –æ—Ç XN –∫ Runner —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏](#6-workflow-–æ—Ç-xn-–∫-runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)
7. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#7-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
8. [Acceptance Criteria](#8-acceptance-criteria)

---

## 1. –¶–µ–ª—å XN-–∞–Ω–∞–ª–∏–∑–∞

XN-–∞–Ω–∞–ª–∏–∑ ‚Äî —ç—Ç–æ **research-–º–æ–¥—É–ª—å**, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å:

> **"–ö–∞–∫–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞ (XN) –∏–º–µ—é—Ç —Å–∏–≥–Ω–∞–ª—ã, –µ—Å–ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å, –∫–æ–º–∏—Å—Å–∏–∏, slippage –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏?"**

–≠—Ç–æ **—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ —Å–∏–≥–Ω–∞–ª–æ–≤** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–∞—Ö.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º:
- **Entry price**: —Ü–µ–Ω–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π —Å–≤–µ—á–µ –ü–û–°–õ–ï –º–æ–º–µ–Ω—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç**: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π HIGH, –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–π –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 90 –¥–Ω–µ–π)
- **XN-–º–Ω–æ–∂–∏—Ç–µ–ª–∏**: –∫–∞–∫–∏–µ —É—Ä–æ–≤–Ω–∏ x2, x3, x5, x10, x20, x50, x100 –±—ã–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã
- **–í—Ä–µ–º—è –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è**: –∑–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –æ—Ç entry_time –±—ã–ª –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–∞–∂–¥—ã–π XN-—É—Ä–æ–≤–µ–Ω—å

---

## 2. –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç XN-–∞–Ω–∞–ª–∏–∑

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

XN-–∞–Ω–∞–ª–∏–∑ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–≤–∞ CSV —Ñ–∞–π–ª–∞:

#### `xn_per_signal.csv`

–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∏–≥–Ω–∞–ª—É:
- `signal_id`, `contract_address`, `entry_time`, `entry_price`
- `max_price`, `max_xn` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç
- `time_to_x2`, `time_to_x3`, `time_to_x5`, ... ‚Äî –≤—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ XN —É—Ä–æ–≤–Ω—è (–≤ –º–∏–Ω—É—Ç–∞—Ö) –∏–ª–∏ `None`, –µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç

**–ü—Ä–∏–º–µ—Ä:**
```csv
signal_id,contract_address,entry_time,entry_price,max_price,max_xn,time_to_x2,time_to_x3,time_to_x5,time_to_x10
signal_1,TOKEN123,2024-01-01T12:00:00Z,0.001,0.015,15.0,120,480,1440,NULL
signal_2,TOKEN456,2024-01-02T10:00:00Z,0.002,0.004,2.0,60,NULL,NULL,NULL
```

#### `xn_summary.csv`

–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º —Å–∏–≥–Ω–∞–ª–∞–º:
- `xn_level` ‚Äî —É—Ä–æ–≤–µ–Ω—å XN (2, 3, 5, 10, ...)
- `reached_count` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤, –¥–æ—Å—Ç–∏–≥—à–∏—Ö —ç—Ç–æ—Ç —É—Ä–æ–≤–µ–Ω—å
- `reached_pct` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç —Å–∏–≥–Ω–∞–ª–æ–≤, –¥–æ—Å—Ç–∏–≥—à–∏—Ö —É—Ä–æ–≤–µ–Ω—å (0-100%)
- `median_time_minutes` ‚Äî –º–µ–¥–∏–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–º–∏–Ω—É—Ç—ã), –∏–ª–∏ `None`
- `p90_time_minutes` ‚Äî 90-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –∏–ª–∏ `None`

**–ü—Ä–∏–º–µ—Ä:**
```csv
xn_level,reached_count,reached_pct,median_time_minutes,p90_time_minutes
2,1245,89.5,4320,12960
3,856,61.6,8640,25920
5,523,37.6,17280,43200
10,234,16.8,34560,86400
20,89,6.4,NULL,129600
```

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

‚úÖ **"–°–∫–æ–ª—å–∫–æ % —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—à–ª–∏ –¥–æ x5 –∑–∞ 90 –¥–Ω–µ–π?"**
- –°–º–æ—Ç—Ä–∏—Ç–µ –≤ `xn_summary.csv`: —Å—Ç—Ä–æ–∫–∞ —Å `xn_level=5` ‚Üí `reached_pct`

‚úÖ **"–ó–∞ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å—Ä–µ–¥–Ω–µ–º –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è x2?"**
- –°–º–æ—Ç—Ä–∏—Ç–µ `median_time_minutes` –¥–ª—è `xn_level=2`

‚úÖ **"–ö–∞–∫–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç –±—ã–ª —É —ç—Ç–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞?"**
- –°–º–æ—Ç—Ä–∏—Ç–µ –≤ `xn_per_signal.csv`: `max_xn` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ `signal_id`

‚úÖ **"–î–æ—Å—Ç–∏–≥–∞—é—Ç –ª–∏ —Å–∏–≥–Ω–∞–ª—ã x10, –∏ –µ—Å–ª–∏ –¥–∞, —Ç–æ –∫–∞–∫ –±—ã—Å—Ç—Ä–æ?"**
- –°–º–æ—Ç—Ä–∏—Ç–µ `reached_pct` –∏ `median_time_minutes` –¥–ª—è `xn_level=10`

---

## 3. –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞–µ—Ç XN-–∞–Ω–∞–ª–∏–∑

‚ö†Ô∏è **–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

### ‚ùå –ù–ï —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—å
- –ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–º
- –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ –ø–æ–∑–∏—Ü–∏–π
- –ù–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞–ø–∏—Ç–∞–ª–∞

### ‚ùå –ù–ï —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–¥–µ—Ä–∂–∫–∏
- –ù–µ—Ç –∫–æ–º–∏—Å—Å–∏–π (swap fee, LP fee)
- –ù–µ—Ç slippage
- –ù–µ—Ç network fees

### ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –ù–µ—Ç TP/SL –ª–æ–≥–∏–∫–∏
- –ù–µ—Ç –≤—ã—Ö–æ–¥–∞ –ø–æ —Ç–∞–π–º–∞—É—Ç—É
- –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

### ‚ùå –ù–ï —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ HIGH —Ü–µ–Ω–∞ (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ)

### ‚úÖ –ß—Ç–æ –î–ï–õ–ê–ï–¢

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—á–∏—Å—Ç—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞** —Å–∏–≥–Ω–∞–ª–æ–≤
- –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, **–∫–∞–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã –∏–º–µ—é—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª** –¥–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –î–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ **–ø—Ä–æ—Ü–µ–Ω—Ç–∞–º —É—Å–ø–µ—Ö–∞** –Ω–∞ —Ä–∞–∑–Ω—ã—Ö XN-—É—Ä–æ–≤–Ω—è—Ö
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å **–≤—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è** —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Ä–æ—Å—Ç–∞

---

## 4. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç x2, x5, x10?

**XN-–º–Ω–æ–∂–∏—Ç–µ–ª—å** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –≤–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã—Ä–æ—Å–ª–∞ —Ü–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ entry price:

- **x2** = —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –≤ 2 —Ä–∞–∑–∞ (100% –ø—Ä–∏–±—ã–ª—å)
- **x5** = —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –≤ 5 —Ä–∞–∑ (400% –ø—Ä–∏–±—ã–ª—å)
- **x10** = —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –≤ 10 —Ä–∞–∑ (900% –ø—Ä–∏–±—ã–ª—å)
- **x20** = —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –≤ 20 —Ä–∞–∑ (1900% –ø—Ä–∏–±—ã–ª—å)
- **x100** = —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –≤ 100 —Ä–∞–∑ (9900% –ø—Ä–∏–±—ã–ª—å)

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏

–ò–∑ `xn_summary.csv`:
```csv
xn_level,reached_count,reached_pct,median_time_minutes,p90_time_minutes
5,523,37.6,17280,43200
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- 37.6% —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è x5 (5-–∫—Ä–∞—Ç–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞)
- –ú–µ–¥–∏–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è x5: 17280 –º–∏–Ω—É—Ç = 12 –¥–Ω–µ–π
- 90% —Å–∏–≥–Ω–∞–ª–æ–≤, –¥–æ—Å—Ç–∏–≥—à–∏—Ö x5, —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ –∑–∞ 43200 –º–∏–Ω—É—Ç = 30 –¥–Ω–µ–π

**–í—ã–≤–æ–¥:** –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å –ø–µ—Ä–∏–æ–¥–æ–º —É–¥–µ—Ä–∂–∞–Ω–∏—è 30 –¥–Ω–µ–π, –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 37.6% —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç x5.

### –í—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

`time_to_xN` –∏–∑–º–µ—Ä—è–µ—Ç—Å—è **–≤ –º–∏–Ω—É—Ç–∞—Ö –æ—Ç entry_time**:

- `time_to_x2 = 120` ‚Üí x2 –±—ã–ª –¥–æ—Å—Ç–∏–≥–Ω—É—Ç —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞ –ø–æ—Å–ª–µ entry
- `time_to_x5 = 1440` ‚Üí x5 –±—ã–ª –¥–æ—Å—Ç–∏–≥–Ω—É—Ç —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ (1 –¥–µ–Ω—å) –ø–æ—Å–ª–µ entry
- `time_to_x10 = NULL` ‚Üí x10 –Ω–µ –±—ã–ª –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è

---

## 5. –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HIGH, –∞ –Ω–µ CLOSE

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HIGH —Ü–µ–Ω—ã

XN-–∞–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **HIGH —Ü–µ–Ω—É —Å–≤–µ—á–µ–π**, –∞ –Ω–µ CLOSE, –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

1. **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å –¥–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π**
   - Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
   - –ï—Å–ª–∏ HIGH –¥–æ—Å—Ç–∏–≥ x5 –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç, —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–π—Ç–∏ —Å –ø—Ä–∏–±—ã–ª—å—é x5
   - CLOSE –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ HIGH, —á—Ç–æ –∑–∞–Ω–∏–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª

2. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª**
   - HIGH –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞
   - –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ —Å–∏–≥–Ω–∞–ª–∞

3. **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ü–µ–Ω–∫–∏**
   - –ï—Å–ª–∏ HIGH –Ω–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç x5, —Ç–æ CLOSE —Ç–µ–º –±–æ–ª–µ–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HIGH –¥–∞–µ—Ç –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—É—é (–Ω–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é) –æ—Ü–µ–Ω–∫—É

### –ü—Ä–∏–º–µ—Ä

–°–≤–µ—á–∞:
- `open = 100`
- `high = 150` (HIGH –¥–æ—Å—Ç–∏–≥ x1.5 –æ—Ç entry)
- `low = 95`
- `close = 110`

–ï—Å–ª–∏ `entry_price = 100`, —Ç–æ:
- –ü–æ HIGH: –¥–æ—Å—Ç–∏–≥–Ω—É—Ç x1.5 (150 / 100)
- –ü–æ CLOSE: –¥–æ—Å—Ç–∏–≥–Ω—É—Ç x1.1 (110 / 100)

–î–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å, —á—Ç–æ **–±—ã–ª –º–æ–º–µ–Ω—Ç**, –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–π—Ç–∏ —Å x1.5.

---

## 6. Workflow: –æ—Ç XN –∫ Runner —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã:

### –®–∞–≥ 1: XN Analysis

–ó–∞–ø—É—Å—Ç–∏—Ç–µ XN-–∞–Ω–∞–ª–∏–∑ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:

```bash
python -m backtester.research.xn_analysis.xn_runner \
  --signals signals/example_signals.csv \
  --holding-days 90 \
  --timeframe 1m \
  --xn-levels 2 3 5 10 20 50 100 \
  --output-dir output/xn_analysis/ \
  --candles-dir data/candles/cached \
  --loader csv
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `output/xn_analysis/xn_per_signal.csv`
- `output/xn_analysis/xn_summary.csv`

### –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
1. –ö–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç x2, x5, x10?
2. –ó–∞ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –≤ —Å—Ä–µ–¥–Ω–µ–º –¥–æ—Å—Ç–∏–≥–∞—é—Ç—Å—è —ç—Ç–∏ —É—Ä–æ–≤–Ω–∏?
3. –ï—Å—Ç—å –ª–∏ —Å–º—ã—Å–ª —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ 90 –¥–Ω–µ–π, –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 30?

**–ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è:**

–ò–∑ `xn_summary.csv` –≤–∏–¥–Ω–æ, —á—Ç–æ:
- x2 –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è 89.5% —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞ 3 –¥–Ω—è (median)
- x5 –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è 37.6% —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞ 12 –¥–Ω–µ–π (median)
- x10 –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è 16.8% —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞ 24 –¥–Ω—è (median)

**–í—ã–≤–æ–¥:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–æ—Å—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–µ—Ä–≤—ã–µ 30 –¥–Ω–µ–π. –î–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥ —É–¥–µ—Ä–∂–∞–Ω–∏—è 30 –¥–Ω–µ–π.

### –®–∞–≥ 3: –í—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–ù–∞ –æ—Å–Ω–æ–≤–µ XN-–∞–Ω–∞–ª–∏–∑–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

**–í `config/strategies_example.yaml` (baseline –ø–∞—Ä–∞–º–µ—Ç—Ä—ã):**
```yaml
strategies:
  - name: Runner_Baseline
    type: RUNNER
    params:
      take_profit_levels:
        - { xn: 2.0, fraction: 0.4 }   # 40% –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 2x
        - { xn: 5.0, fraction: 0.4 }   # 40% –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 5x
        - { xn: 10.0, fraction: 0.2 }  # 20% –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 10x
      time_stop_minutes: 20160  # 14 –¥–Ω–µ–π (20160 –º–∏–Ω—É—Ç = 14 * 24 * 60)
      use_high_for_targets: true
      exit_on_first_tp: false
      allow_partial_fills: true
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û—Å—Ç–∞—Ç–æ–∫ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ `close` –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–≤–µ—á–∏ –æ–∫–Ω–∞ (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏).

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —á–µ—Ä–µ–∑ Portfolio

–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Runner –Ω–∞ –æ—Å–Ω–æ–≤–µ XN-–∞–Ω–∞–ª–∏–∑–∞, –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–æ–ª–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º:

```bash
python main.py \
  --signals signals/example_signals.csv \
  --strategies-config config/strategies_example.yaml \
  --backtest-config config/backtest_example.yaml
```

**–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ:**
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ—Ä—Ç—Ñ–µ–ª—å (–±–∞–ª–∞–Ω—Å, –ª–∏–º–∏—Ç—ã, –∞–ª–ª–æ–∫–∞—Ü–∏—è)
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑–¥–µ—Ä–∂–∫–∏ (–∫–æ–º–∏—Å—Å–∏–∏, slippage)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω—ã–µ –≤—ã—Ö–æ–¥—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö TP
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è portfolio-level reset (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ—Ä–≥–æ–≤–ª–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- `*_trades.csv` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ Runner (levels_hit, fractions_exited, realized_multiple)
- `portfolio_summary.csv` —Å Runner –º–µ—Ç—Ä–∏–∫–∞–º–∏ (reset_count, cycle_start_equity, equity_peak_in_cycle)

### –ü–æ—á–µ–º—É —ç—Ç–æ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω?

1. **–ë—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–∏–Ω–∏–Ω–≥:** XN-–∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ (–Ω–µ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è, –Ω–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π)
2. **–ü–æ–Ω—è—Ç–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞:** –ü—Ä–æ—Ü–µ–Ω—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è XN –ª–µ–≥—á–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å, —á–µ–º Sharpe ratio
3. **–û—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:** –í—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ timeout –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
4. **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:** –ù–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## 7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### CLI –∫–æ–º–∞–Ω–¥–∞

```bash
python -m backtester.research.xn_analysis.xn_runner \
  --signals <path_to_signals.csv> \
  --holding-days 90 \
  --timeframe 1m \
  --xn-levels 2 3 4 5 10 20 50 100 \
  --output-dir output/xn_analysis/ \
  --candles-dir data/candles/cached \
  --loader csv
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `--signals` (required) ‚Äî –ø—É—Ç—å –∫ CSV —Ñ–∞–π–ª—É —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏
- `--holding-days` (default: 90) ‚Äî –ø–µ—Ä–∏–æ–¥ —É–¥–µ—Ä–∂–∞–Ω–∏—è –≤ –¥–Ω—è—Ö
- `--timeframe` (default: "1m") ‚Äî —Ç–∞–π–º—Ñ—Ä–µ–π–º —Å–≤–µ—á–µ–π ("1m", "5m", "15m")
- `--xn-levels` (default: "2 3 4 5 10 20 50 100") ‚Äî —É—Ä–æ–≤–Ω–∏ XN –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- `--output-dir` (default: "output/xn_analysis/") ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `--candles-dir` (default: "data/candles/cached") ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ —Å–≤–µ—á–∞–º–∏
- `--loader` (default: "csv") ‚Äî —Ç–∏–ø –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ ("csv" –∏–ª–∏ "gecko")

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from backtester.research.xn_analysis import (
    XNAnalysisConfig,
    XNAnalyzer,
    XNSignalResult,
)
from backtester.domain.models import Signal
import pandas as pd

# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
config = XNAnalysisConfig(
    holding_days=90,
    xn_levels=[2, 3, 5, 10, 20],
    price_timeframe="1m",
    price_source="high",
)

# –°–æ–∑–¥–∞–π—Ç–µ —Å–∏–≥–Ω–∞–ª –∏ —Å–≤–µ—á–∏
signal = Signal(...)
candles_df = pd.DataFrame(...)  # columns: timestamp, open, high, low, close, volume

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑
result = XNAnalyzer.analyze_signal(signal, candles_df, config)

if result:
    print(f"Max XN: {result.max_xn}x")
    print(f"Time to x5: {result.time_to_xn.get(5.0)} minutes")
```

---

## 8. Acceptance Criteria

### ‚úÖ –ï—Å—Ç—å CSV —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π XN

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã:
  - `output/xn_analysis/xn_per_signal.csv` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∏–≥–Ω–∞–ª—É
  - `output/xn_analysis/xn_summary.csv` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```python
import pandas as pd

summary_df = pd.read_csv("output/xn_analysis/xn_summary.csv")
print(summary_df)
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
# xn_level, reached_count, reached_pct, median_time_minutes, p90_time_minutes
```

---

### ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å: "—Å–∫–æ–ª—å–∫–æ % —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—à–ª–∏ –¥–æ x5 –∑–∞ 90 –¥–Ω–µ–π"

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```python
import pandas as pd

summary_df = pd.read_csv("output/xn_analysis/xn_summary.csv")
x5_row = summary_df[summary_df["xn_level"] == 5.0]
if not x5_row.empty:
    reached_pct = x5_row.iloc[0]["reached_pct"]
    print(f"{reached_pct}% —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—à–ª–∏ –¥–æ x5 –∑–∞ 90 –¥–Ω–µ–π")
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ß–∏—Å–ª–æ –æ—Ç 0 –¥–æ 100 (–ø—Ä–æ—Ü–µ–Ω—Ç)
- –ò–ª–∏ –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –æ—Ç–∫—Ä—ã—Ç—å CSV –∏ –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É —Å `xn_level=5`

---

### ‚úÖ –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ –∏–∑–¥–µ—Ä–∂–µ–∫

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í –∫–æ–¥–µ –º–æ–¥—É–ª—è `xn_analysis` –Ω–µ—Ç –∏–º–ø–æ—Ä—Ç–æ–≤:
  - ‚ùå `from ..domain.portfolio import PortfolioEngine`
  - ‚ùå `from ..domain.strategy_base import Strategy`
  - ‚ùå –ù–µ—Ç —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π, slippage, fees

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –¢–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞ —Å `Signal` –∏ `Candle`
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑ —Ü–µ–Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –¢–æ–ª—å–∫–æ —Ä–∞—Å—á–µ—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞

---

### ‚úÖ –ö–æ–¥ –Ω–µ –ª–æ–º–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ Stage A/B

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ú–æ–¥—É–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º namespace: `backtester/research/xn_analysis/`
- –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π, –ø–æ—Ä—Ç—Ñ–µ–ª—è, runner'–∞
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∏–º–ø–æ—Ä—Ç—ã –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π

**–¢–µ—Å—Ç—ã:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
pytest tests/

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
# XN-–∞–Ω–∞–ª–∏–∑ –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–ª–∏—è—Ç—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

---

### ‚úÖ –≠—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –±–∞–∑—É –¥–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ workflow:**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ XN-–∞–Ω–∞–ª–∏–∑:**
   ```bash
   python -m backtester.research.xn_analysis.xn_runner \
     --signals signals/example_signals.csv \
     --holding-days 90
   ```

2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ `xn_summary.csv`
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ —É–¥–µ—Ä–∂–∞–Ω–∏—è
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ü–µ–ª–µ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ –≤—ã—Ö–æ–¥–∞ (x5, x10)

3. **–°–æ–∑–¥–∞–π—Ç–µ Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å —ç—Ç–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
   ```yaml
   strategies:
     - name: runner_based_on_xn
       type: RUNNER
       params:
         timeout_minutes: 43200  # 30 –¥–Ω–µ–π (–Ω–∞ –æ—Å–Ω–æ–≤–µ XN-–∞–Ω–∞–ª–∏–∑–∞)
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç:**
   ```bash
   python main.py --strategies-config config/strategies_example.yaml
   ```

5. **–°—Ä–∞–≤–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - XN-–∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞–ª 37.6% —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–ª–∏ x5
   - Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å —É—á–µ—Ç–æ–º –∏–∑–¥–µ—Ä–∂–µ–∫)

---

## –ò—Ç–æ–≥

XN-–∞–Ω–∞–ª–∏–∑ ‚Äî —ç—Ç–æ **research-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ **–¥–æ** –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω—ã—Ö –±—ç–∫—Ç–µ—Å—Ç–æ–≤ —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç:

1. ‚úÖ –ë—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
2. ‚úÖ –í—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π
3. ‚úÖ –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã –∏–º–µ—é—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —É–¥–µ—Ä–∂–∞–Ω–∏—è
4. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Ä–æ—Å—Ç–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ—Å–ª–µ XN-–∞–Ω–∞–ª–∏–∑–∞:** —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º.

---

## 9. Stage A/B –¥–ª—è Runner —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### Stage A: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –º–µ—Ç—Ä–∏–∫–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫—Ç–µ—Å—Ç–∞ Runner —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, Stage A –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç Runner-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

```bash
python -m backtester.research.run_stage_a --reports-dir output/reports/
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `strategy_stability.csv` —Å Runner –º–µ—Ç—Ä–∏–∫–∞–º–∏:
- `hit_rate_x2`: –î–æ–ª—è —Å–¥–µ–ª–æ–∫, –¥–æ—Å—Ç–∏–≥—à–∏—Ö x2
- `hit_rate_x5`: –î–æ–ª—è —Å–¥–µ–ª–æ–∫, –¥–æ—Å—Ç–∏–≥—à–∏—Ö x5
- `p90_hold_days`: 90-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
- `tail_contribution`: –î–æ–ª—è PnL –æ—Ç top 5% —Å–¥–µ–ª–æ–∫
- `max_drawdown_pct`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ –ø–æ equity curve

### Stage B: –û—Ç–±–æ—Ä –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º

Runner —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–±–∏—Ä–∞—é—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:

```bash
python -m backtester.decision.run_stage_b --stability-csv output/reports/strategy_stability.csv
```

**Baseline –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è Runner:**
- `min_hit_rate_x2: 0.30` (30%)
- `min_hit_rate_x5: 0.10` (10%)
- `min_tail_contribution: 0.3` (30%)
- `max_drawdown_pct: -0.5` (-50%)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `strategy_selection.csv` —Å —Ñ–ª–∞–≥–æ–º `passed` –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

---

## 10. Portfolio-Level Reset

### –û–ø–∏—Å–∞–Ω–∏–µ

Portfolio-level reset ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º –ø–æ—Ä–æ–≥–∞ equity.

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–∏: `equity >= cycle_start_equity * runner_reset_multiple`
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞:
  - –ó–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ
  - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `cycle_start_equity = new equity`
  - –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `equity_peak_in_cycle`
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `reset_until` –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ö–æ–¥–æ–≤ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
portfolio:
  runner_reset_enabled: true
  runner_reset_multiple: 2.0  # –ü–æ—Ä–æ–≥: equity >= cycle_start_equity * 2.0
```

**–ú–µ—Ç—Ä–∏–∫–∏ –≤ portfolio_summary.csv:**
- `reset_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π reset
- `last_reset_time`: –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ reset
- `cycle_start_equity`: Equity –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—É—â–µ–≥–æ —Ü–∏–∫–ª–∞
- `equity_peak_in_cycle`: –ü–∏–∫ equity –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ

---

## –ò—Ç–æ–≥

XN-–∞–Ω–∞–ª–∏–∑ ‚Äî —ç—Ç–æ **research-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ **–¥–æ** –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω—ã—Ö –±—ç–∫—Ç–µ—Å—Ç–æ–≤ —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç:

1. ‚úÖ –ë—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
2. ‚úÖ –í—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π
3. ‚úÖ –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã –∏–º–µ—é—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —É–¥–µ—Ä–∂–∞–Ω–∏—è
4. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Ä–æ—Å—Ç–∞

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ—Å–ª–µ XN-–∞–Ω–∞–ª–∏–∑–∞:** —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Runner-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º, –∑–∞—Ç–µ–º Stage A/B –¥–ª—è –æ—Ç–±–æ—Ä–∞ –ª—É—á—à–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.










