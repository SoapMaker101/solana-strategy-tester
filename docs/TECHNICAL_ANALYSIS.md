# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ Solana Strategy Tester v2.1.9

**–í–µ—Ä—Å–∏—è —Ñ–∏–∫—Å–∞—Ü–∏–∏:** 2.1.9 (Frozen Baseline)  
**–î–∞—Ç–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏:** 2025-01-06  
**–†–µ–∂–∏–º:** Runner-only  
**–°—Ç–∞—Ç—É—Å:** Stable / Frozen

---

## 1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–¥–∞

### Test coverage (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π)

**–°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤:**
- ‚úÖ 306 passed, 0 warnings (–Ω–∞ –¥–∞—Ç—É —Ñ–∏–∫—Å–∞—Ü–∏–∏ 2025-01-06)
- ‚úÖ –í—Å–µ guard-—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–∞—Ö

**Guard-—Ç–µ—Å—Ç—ã:**
- `tests/domain/test_strategy_output_contract.py` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç StrategyOutput
- `tests/application/test_portfolio_config_guards.py` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `tests/decision/test_stage_b_v2_gate_contract.py` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç V2 gate –ª–æ–≥–∏–∫–∏

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã guard-—Ç–µ—Å—Ç–∞–º–∏
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ edge cases –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã

### Stability

**–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–∏ 2.1.9:**
- ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è (replay mode)
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö
- ‚úÖ –ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–æ–±—ã—Ç–∏–π
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã (market close)
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ UUID (–ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

### Determinism

**–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:**
- ‚úÖ Replay mode –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏–º—É–ª—è—Ü–∏—é
- ‚úÖ –°–æ–±—ã—Ç–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- ‚úÖ Market close price –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `candles[-1].close` (–Ω–µ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (signals, candles)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ (–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã)

---

## 2. Guard-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

### –ö–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —è–≤–ª—è—é—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏

**Guard-—Ç–µ—Å—Ç—ã –∑–∞—â–∏—â–∞—é—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:**

1. **StrategyOutput Contract:**
   - –§–∞–π–ª: `tests/domain/test_strategy_output_contract.py`
   - –ó–∞—â–∏—â–∞–µ—Ç: legacy reasons ‚Üí canonical mapping, `meta["ladder_reason"]` priority, `canonical_reason` optional and auto-computed

2. **Config Parsing Contract:**
   - –§–∞–π–ª: `tests/application/test_portfolio_config_guards.py`
   - –ó–∞—â–∏—â–∞–µ—Ç: `0 ‚â† None` parsing (`_parse_int_optional`), string bool parsing (`_parse_bool`), missing keys handling

3. **Decision V2 Gate Contract:**
   - –§–∞–π–ª: `tests/decision/test_stage_b_v2_gate_contract.py`
   - –ó–∞—â–∏—â–∞–µ—Ç: V2 applies only when V2 columns present, V2 rejects `tail_pnl_share < 0.30`, V2 checks `hit_rate_x4 >= 0.10` and `non_tail_pnl_share >= -0.20`

### –ü–æ—á–µ–º—É –∏—Ö –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å

Guard-—Ç–µ—Å—Ç—ã –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ:

- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã:** –¢–µ—Å—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–†–µ–≥—Ä–µ—Å—Å–∏–∏:** –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–µ—Ç —Å–∫—Ä—ã—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –¢–µ—Å—Ç—ã —Å–ª—É–∂–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è

**–ü—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç, –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥, –∞ –Ω–µ —Ç–µ—Å—Ç.

---

## 3. Technical Debt (—è–≤–Ω–æ)

### V2-hack –≤ Stage B

**–ì–¥–µ:** `backtester/decision/strategy_selector.py` ‚Äî `select_strategies()`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
if runner_criteria is None:
    required_v2_cols = {"hit_rate_x4", "tail_pnl_share", "non_tail_pnl_share"}
    has_v2_cols = required_v2_cols.issubset(set(stability_df.columns))
    if has_v2_cols and (criteria.min_hit_rate_x2 is None and criteria.min_hit_rate_x5 is None):
        runner_criteria = criteria
        criteria = DEFAULT_CRITERIA_V1
```

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –î–æ–ø—É—Å—Ç–∏–º –¢–û–õ–¨–ö–û –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚ö†Ô∏è –ü–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ TECH_DEBT –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∞
- üìù –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ `docs/TEST_GREEN_BASELINE_2025-01-06.md` –∏ `docs/KNOWN_ISSUES_2.1.9.md`

**–ë—É–¥—É—â–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä (–ü–û–°–õ–ï freeze):**
```python
select_strategies(
    stability_df,
    base_criteria: SelectionCriteria,
    runner_criteria: Optional[RunnerCriteria]
)
```

**–ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –≤ 2.1.9:**
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏
- –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã
- –õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π

### Typing issues (basedpyright)

**–ì–¥–µ:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –≤ `backtester/`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ–ø–æ–ª–Ω—ã–µ type hints (`Any`, `Dict[str, Any]`)
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ type annotations
- –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ç–∏–ø—ã –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö

**–ü—Ä–∏–º–µ—Ä—ã:**
- `backtester/application/runner.py`: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `Any`
- `backtester/domain/models.py`: `meta: Dict[str, Any]` –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–≥–∏—Ö —Ç–∏–ø–æ–≤
- `backtester/infrastructure/reporter.py`: pandas –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–ª–Ω—ã—Ö type hints

**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π. –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, warnings –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ runtime.

**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π fix:** –í–µ—Ä—Å–∏—è 2.2 (typing cleanup)

**–ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –≤ 2.1.9:**
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã
- –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ —Ä–∞–±–æ—Ç—ã
- –õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º

### Pandas type hints

**–ì–¥–µ:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö pandas

**–ü—Ä–æ–±–ª–µ–º—ã:**
- `pd.DataFrame` –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –∫–æ–ª–æ–Ω–æ–∫
- `pd.Series` –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏–π
- –û–ø–µ—Ä–∞—Ü–∏–∏ `df[...]` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `Any`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `backtester/infrastructure/reporter.py`: `df.to_csv()` –±–µ–∑ type hints
- `backtester/audit/invariants.py`: –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å DataFrame –±–µ–∑ —Å—Ç—Ä–æ–≥–∏—Ö —Ç–∏–ø–æ–≤
- `backtester/research/strategy_stability.py`: –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –±–µ–∑ type hints

**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π. –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ IDE –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è.

**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π fix:** –í–µ—Ä—Å–∏—è 2.2 (pandas type hints)

**–ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –≤ 2.1.9:**
- Pandas typing —Å–ª–æ–∂–µ–Ω –∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ü–∏–∫–ª–æ–º

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

**–ì–¥–µ:** –†–∞–∑–ª–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è reason —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ñ–∞–π–ª–∞–º
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É—Ç–∏–ª–∏—Ç—ã –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ–±—â–∏–µ –º–æ–¥—É–ª–∏
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å

**–ü—Ä–∏–º–µ—Ä—ã:**
- `normalize_reason` –≤ `backtester/audit/invariants.py` –∏ `backtester/domain/models.py`
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã

**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π fix:** –í–µ—Ä—Å–∏—è 3.0 (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)

**–ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –≤ 2.1.9:**
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- –†–∏—Å–∫ –≤–Ω–µ—Å–µ–Ω–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- –õ—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å –ø–æ–ª–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## 4. Risk map

| –û–±–ª–∞—Å—Ç—å | –†–∏—Å–∫ | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è | –ö–æ–≥–¥–∞ —á–∏–Ω–∏—Ç—å (–Ω–µ —Å–µ–π—á–∞—Å) |
|---------|------|-------------|--------------------------|
| Typing | Basedpyright warnings | –ù–∏–∑–∫–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞, –Ω–µ—Ç –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ IDE | –í–µ—Ä—Å–∏—è 2.2 |
| Pandas types | –ù–µ–ø–æ–ª–Ω—ã–µ type hints | –ù–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è pandas –æ–ø–µ—Ä–∞—Ü–∏–π | –í–µ—Ä—Å–∏—è 2.2 |
| V2-hack | –ù–µ—è–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è V2 –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ | –£—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–¥–∞, –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º | –í–µ—Ä—Å–∏—è 2.2 |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏, —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è | –£—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É | –í–µ—Ä—Å–∏—è 3.0 (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è) |
| Cache update | –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –∫–µ—à–∞ –≤–º–µ—Å—Ç–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –º–Ω–æ–≥–æ –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API | –í–µ—Ä—Å–∏—è 2.2+ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è) |

### –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤

**Typing:**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (warnings —É–∂–µ –µ—Å—Ç—å)
- **–í–ª–∏—è–Ω–∏–µ:** –ù–∏–∑–∫–æ–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ 2.2)

**Pandas types:**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (–Ω–µ–ø–æ–ª–Ω—ã–µ hints —É–∂–µ –µ—Å—Ç—å)
- **–í–ª–∏—è–Ω–∏–µ:** –ù–∏–∑–∫–æ–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ 2.2)

**V2-hack:**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ—è–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- **–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ 2.2)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã:**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- **–í–ª–∏—è–Ω–∏–µ:** –ù–∏–∑–∫–æ–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ 3.0)

**Cache update:**
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É–∂–µ –µ—Å—Ç—å)
- **–í–ª–∏—è–Ω–∏–µ:** –ù–∏–∑–∫–æ–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É, –Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

---

## 5. –ü–æ—á–µ–º—É –≤–µ—Ä—Å–∏—è –Ω–∞–∑–≤–∞–Ω–∞ 2.1.9

### –ü–æ—á–µ–º—É –Ω–µ 2.2

–í–µ—Ä—Å–∏—è 2.1.9 —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç **—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** –ø—Ä–æ–µ–∫—Ç–∞:

- ‚úÖ –¢–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ: 306 passed, 0 warnings
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: Runner-only —Ä–µ–∂–∏–º –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã: Guard-—Ç–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ Legacy API —Å–æ—Ö—Ä–∞–Ω—ë–Ω: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

**–ù–æ –µ—Å—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏:

- Basedpyright typing warnings
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –≤ decision layer (V2-—Ö–∞–∫)
- Pandas type hints –Ω–µ–ø–æ–ª–Ω—ã–µ
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ø—Ä–æ—â–µ–Ω–∏—è –æ—Ç–ª–æ–∂–µ–Ω—ã

–≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã **–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã**, –Ω–æ —Ç—Ä–µ–±—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í–µ—Ä—Å–∏—è 2.2 –±—É–¥–µ—Ç –ø–æ—Å–≤—è—â–µ–Ω–∞ cleanup –∏ typing improvements.

### –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "frozen baseline"

"Frozen baseline" –æ–∑–Ω–∞—á–∞–µ—Ç:

- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –í–µ—Ä—Å–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –∏ –Ω–µ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è
- ‚úÖ **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã:** –í—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã guard-—Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AS-IS —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **–¢–µ—Å—Ç—ã:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –Ω–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ùå –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ bump –≤–µ—Ä—Å–∏–∏
- ‚ùå –ù–µ–ª—å–∑—è –ª–æ–º–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- ‚ùå –ù–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å legacy API
- ‚ùå –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å —Ç–µ—Å—Ç—ã "–ø–æ–¥ –∫–æ–¥"

**–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- ‚úÖ Guard-—Ç–µ—Å—Ç—ã (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö)
- ‚úÖ Bug fixes (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ, —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤)

---

## 6. –ì—Ä–∞–Ω–∏—Ü—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤ 2.2

–í –≤–µ—Ä—Å–∏–∏ 2.2 –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

- **Typing cleanup:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ basedpyright warnings
- **Pandas type hints:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö type hints –¥–ª—è pandas –æ–ø–µ—Ä–∞—Ü–∏–π
- **V2-hack —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ—è–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –≤ `select_strategies()`
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–µ—à–∞:** –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ø—Ä–æ—â–µ–Ω–∏—è:** –í—ã–Ω–æ—Å –æ–±—â–∏—Ö —É—Ç–∏–ª–∏—Ç, —É–ø—Ä–æ—â–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ù–µ –ª–æ–º–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)

### –ß—Ç–æ –Ω–µ–ª—å–∑—è –±–µ–∑ –Ω–æ–≤–æ–≥–æ baseline

–ë–µ–∑ –Ω–æ–≤–æ–≥–æ baseline (–ø–æ—Å–ª–µ 2.2) –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å:

- **Breaking changes:** –ò–∑–º–µ–Ω–µ–Ω–∏—è, –ª–æ–º–∞—é—â–∏–µ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–£–¥–∞–ª–µ–Ω–∏–µ legacy API:** –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ legacy reasons
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:** –ö—Ä—É–ø–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3.0)
2. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
3. –°–æ–∑–¥–∞—Ç—å migration guide
4. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
5. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π baseline

---

## –°—Å—ã–ª–∫–∏

- `docs/RELEASE_2.1.9.md` ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
- `docs/KNOWN_ISSUES_2.1.9.md` ‚Äî –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- `docs/TEST_GREEN_BASELINE_2025-01-06.md` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ guard-—Ç–µ—Å—Ç—ã
- `docs/ARCHITECTURE.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `docs/PIPELINE_GUIDE.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ –¥–∞–Ω–Ω—ã—Ö



