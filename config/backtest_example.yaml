# config/backtest_example.yaml
# üìä –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±—ç–∫—Ç–µ—Å—Ç–∞

backtest:
  # start_at: "2024-06-01T00:00:00Z"  # –ù–∞—á–∞–ª–æ –æ–∫–Ω–∞ –±—ç–∫—Ç–µ—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ = –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
  # end_at: "2024-07-01T00:00:00Z"    # –ö–æ–Ω–µ—Ü –æ–∫–Ω–∞ –±—ç–∫—Ç–µ—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ = –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)

data:
  loader: "csv"                 # –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: "csv" (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª) –∏–ª–∏ "gecko" (–æ–Ω–ª–∞–π–Ω —á–µ—Ä–µ–∑ API GeckoTerminal)
  candles_dir: "data/candles/cached"  # –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è/–ø–æ–∏—Å–∫–∞ —Å–≤–µ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ csv –∏ gecko –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–∏)
  timeframe: "1m"                # –¢–∞–π–º—Ñ—Ä–µ–π–º —Å–≤–µ—á–µ–π: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è "1m" (–º–∏–Ω—É—Ç–Ω—ã–µ) –∏ "15m" (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ 15 –º–∏–Ω—É—Ç)
  before_minutes: 60             # –ö–æ–ª-–≤–æ –º–∏–Ω—É—Ç –î–û —Å–∏–≥–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤—Ö–æ–¥–∞ –ø–æ –ø—Ä–æ—Å–∞–¥–∫–µ)
  after_minutes: 43200           # –ö–æ–ª-–≤–æ –º–∏–Ω—É—Ç –ü–û–°–õ–ï —Å–∏–≥–Ω–∞–ª–∞ (43200 –º–∏–Ω—É—Ç = 30 –¥–Ω–µ–π) ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏
  rate_limit:
    enabled: false                # –í–∫–ª—é—á–∏—Ç—å rate limiting –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
    max_calls_per_minute: 30     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (–ª–∏–º–∏—Ç free API GeckoTerminal)
    on_429: "wait"               # –†–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ 429: "wait" (–∂–¥–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å) –∏–ª–∏ "fail" (–≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç)

portfolio:
  initial_balance_sol: 10.0       # –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –≤ SOL
  allocation_mode: "fixed"      # "fixed" –∏–ª–∏ "dynamic" (—Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ/—Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞)
  percent_per_trade: 0.01         # –î–æ–ª—è –∫–∞–ø–∏—Ç–∞–ª–∞ –Ω–∞ –æ–¥–Ω—É —Å–¥–µ–ª–∫—É (1%)
  max_exposure: 0.95               # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è (80% –∫–∞–ø–∏—Ç–∞–ª–∞ –≤ —Ä—ã–Ω–∫–µ)
  max_open_positions: 100          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
  profit_reset_enabled: true     # Profit reset: –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ equity –ø–æ—Ä—Ç—Ñ–µ–ª—è –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏
  profit_reset_multiple: 1.5      # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è profit reset (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.0 = x2, 3.0 = x3). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ profit_reset_enabled=true
  # Capacity reset (v1.6) - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "capacity choke" (–ø–æ—Ä—Ç—Ñ–µ–ª—å –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–¥–µ–ª–∫–∏)
  capacity_reset:
    enabled: true                  # –í–∫–ª—é—á–∏—Ç—å capacity reset
    window_type: "time"           # –¢–∏–ø –æ–∫–Ω–∞: "time" (–ø–æ –≤—Ä–µ–º–µ–Ω–∏) –∏–ª–∏ "signals" (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–∏–≥–Ω–∞–ª–æ–≤)
    window_size: 7d               # –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞: –¥–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "7d" –∏–ª–∏ 7) –¥–ª—è time, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è signals
    max_blocked_ratio: 0.7        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–ª—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞ –æ–∫–Ω–æ (0.4 = 40%)
    max_avg_hold_days: 20.0       # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–¥–Ω–∏)
    # Capacity prune (v1.7) - —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–ª–æ—Ö–∏—Ö –ø–æ–∑–∏—Ü–∏–π –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ reset
    mode: "prune"                 # –†–µ–∂–∏–º: "prune" (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ) –∏–ª–∏ "close_all" (legacy, –∑–∞–∫—Ä—ã—Ç—å –≤—Å–µ)
    prune_fraction: 0.5          # –î–æ–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ prune (0.5 = 50%)
    prune_min_hold_days: 1.0      # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (–¥–Ω–∏)
    prune_max_mcap_usd: 20000     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π mcap –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (USD)
    prune_max_current_pnl_pct: -0.80  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—É—â–∏–π PnL –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (-0.80 = -80%)
    # Capacity prune hardening (v1.7.1)
    prune_cooldown_signals: 200   # Cooldown –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–∏–≥–Ω–∞–ª–æ–≤ (0 = –æ—Ç–∫–ª—é—á–µ–Ω)
    prune_cooldown_days: null     # Cooldown –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –¥–Ω—è—Ö (null = –æ—Ç–∫–ª—é—á–µ–Ω)
    prune_min_candidates: 3       # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è prune
    prune_protect_min_max_xn: 2.0 # –ó–∞—â–∏—Ç–∞ –ø–æ–∑–∏—Ü–∏–π —Å max_xn >= —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (null = –æ—Ç–∫–ª—é—á–µ–Ω–æ)
  execution_profile: "realistic"   # –ü—Ä–æ—Ñ–∏–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: "realistic" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), "stress", –∏–ª–∏ "custom"
  fee:
    swap_fee_pct: 0.003          # –ö–æ–º–∏—Å—Å–∏—è swap (0.3%)
    lp_fee_pct: 0.001             # –ö–æ–º–∏—Å—Å–∏—è LP (0.1%)
    network_fee_sol: 0.0005       # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è —Å–µ—Ç–∏ –≤ SOL
    
    # Execution profiles —Å reason-based slippage multipliers
    # –ï—Å–ª–∏ profiles —É–∫–∞–∑–∞–Ω—ã, slippage_pct –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (legacy —Ä–µ–∂–∏–º)
    profiles:
      realistic:
        base_slippage_pct: 0.03   # –ë–∞–∑–æ–≤–æ–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ 3%
        slippage_multipliers:
          entry: 1.0               # Slippage –ø—Ä–∏ –≤—Ö–æ–¥–µ: 3% * 1.0 = 3%
          exit_tp: 0.6             # Slippage –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –ø–æ TP: 3% * 0.7 = 2.1% (–º–µ–Ω—å—à–µ, —Ç.–∫. –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –ª—É—á—à–µ)
          exit_sl: 1.3             # Slippage –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –ø–æ SL: 3% * 1.2 = 3.6% (–±–æ–ª—å—à–µ, —Ç.–∫. –ø–∞–Ω–∏–∫–∞)
          exit_timeout: 0.25        # Slippage –ø—Ä–∏ timeout: 3% * 0.3 = 0.9% (–º–µ–Ω—å—à–µ, —Ç.–∫. –ø–ª–∞–Ω–æ–≤—ã–π –≤—ã—Ö–æ–¥)
          exit_manual: 0.5         # Slippage –ø—Ä–∏ —Ä—É—á–Ω–æ–º –≤—ã—Ö–æ–¥–µ: 3% * 0.5 = 1.5%
      
      stress:
        base_slippage_pct: 0.10    # –ë–∞–∑–æ–≤–æ–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ 10% (stress test –¥–ª—è low-cap —Ç–æ–∫–µ–Ω–æ–≤)
        slippage_multipliers:
          entry: 1.0                # 10% * 1.0 = 10%
          exit_tp: 0.6              # 10% * 0.6 = 6%
          exit_sl: 1.3              # 10% * 1.3 = 13%
          exit_timeout: 0.2         # 10% * 0.2 = 2%
          exit_manual: 0.5         # 10% * 0.5 = 5%
    
    # Legacy —Ä–µ–∂–∏–º (–µ—Å–ª–∏ profiles –Ω–µ —É–∫–∞–∑–∞–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è slippage_pct –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π)
    # slippage_pct: 0.10            # –ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ 10% (legacy, –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π)

report:
  output_dir: "output/reports"   # –ü–∞–ø–∫–∞, –∫—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç—á—ë—Ç—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –±—ç–∫—Ç–µ—Å—Ç–∞ (.json –Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é)

runtime:
  max_signals: 100000            # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
  parallel: false                # (–Ω–∞ –±—É–¥—É—â–µ–µ) ‚Äî —Ñ–ª–∞–≥ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
